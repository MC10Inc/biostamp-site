{"version":3,"sources":["app/js/app.js","app/js/util/PPGAnalyze.js","app/js/util/SensorConfig.js","app/js/view/DatabaseView.js","app/js/view/DebugView.js","app/js/view/RecordingsView.js","app/js/view/SensorView.js","app/js/widget/AFE4900PPG.js","app/js/widget/PPGMinusAmbientStream.js","app/js/widget/PPGStream.js","app/js/widget/Projection.js","app/js/widget/SensorPanel.js","app/js/widget/SensorStatus.js","app/js/widget/SensorStream.js","app/js/widget/Stopwatch.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtLA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzTA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxLA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArOA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlUA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3wBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlVA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvDA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApLA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhGA;AAAA;CCAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzJA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArEA;AAAA","file":"dist/js/app.js","sourcesContent":["\"use strict\";\n\nvar _SensorView = require(\"js/view/SensorView\");\n\nReactDOM.render(React.createElement(_SensorView.SensorView, null), document.getElementById(\"mc-content\"));\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Fs = 250;\nvar DURATION = 10;\n\nvar PPGAnalyze = exports.PPGAnalyze = function () {\n  function PPGAnalyze() {\n    _classCallCheck(this, PPGAnalyze);\n  }\n\n  _createClass(PPGAnalyze, [{\n    key: \"setDynamicConfig\",\n    value: function setDynamicConfig(config) {\n      this.config = config;\n    }\n  }, {\n    key: \"tiaGainRf\",\n    value: function tiaGainRf() {\n      if (!this.config) {\n        return undefined;\n      } else if (this.config.tiaGain === \"TIA_GAIN_10KOHM\") {\n        return 10000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_25KOHM\") {\n        return 25000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_50KOHM\") {\n        return 50000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_100KOHM\") {\n        return 100000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_250KOHM\") {\n        return 250000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_500KOHM\") {\n        return 500000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_1000KOHM\") {\n        return 1000000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_1500KOHM\") {\n        return 1500000;\n      } else if (this.config.tiaGain === \"TIA_GAIN_2000KOHM\") {\n        return 2000000;\n      }\n    }\n  }, {\n    key: \"request\",\n    value: function request(resultHandler) {\n      if (!this.config) {\n        resultHandler({ error: \"AFE4900 dynamic config unknown, cannot analyze. Please set config first.\" });\n        return;\n      }\n\n      this.resultHandler = resultHandler;\n      this.ledSamples = [];\n      this.ambSamples = [];\n      this.numSamples = Fs * DURATION;\n    }\n  }, {\n    key: \"read\",\n    value: function read(packet) {\n      if (!this.resultHandler) {\n        return;\n      }\n\n      console.log(packet.toString());\n      for (var i = 0; i < packet.length; i++) {\n        this.ledSamples.push(packet[i][0]);\n        this.ambSamples.push(packet[i][1]);\n      }\n\n      if (this.ledSamples.length >= this.numSamples) {\n        this.finish();\n      }\n    }\n  }, {\n    key: \"checkRange\",\n    value: function checkRange(s) {\n      // AFE4900 ADC is 22-bit, with full scale range representing +/- 1.2v\n      // However TIA operating range is only +/- 1.0v.\n      // Signal is invalid and should not be analyzed if it exceeds the TIA operating range.\n      var cmax = (1 << 21) / 1.2 * 1.0;\n\n      return s.max() < cmax && s.min() > -cmax;\n    }\n  }, {\n    key: \"codesToOutputVolts\",\n    value: function codesToOutputVolts(s) {\n      // Convert ADC codes to volts at TIA output / ADC input\n      return s.multiply(1.2 / (1 << 21));\n    }\n  }, {\n    key: \"outputVoltsToInputAmps\",\n    value: function outputVoltsToInputAmps(s) {\n      // Convert volts at TIA output to amps at TIA input based on gain Rf\n      // Vout = 2 * I * Rf\n      return s.divide(2 * this.tiaGainRf());\n    }\n  }, {\n    key: \"peakToPeak\",\n    value: function peakToPeak(s) {\n      return s.max() - s.min();\n    }\n  }, {\n    key: \"rms\",\n    value: function rms(s) {\n      return Math.sqrt(s.subtract(s.mean()).pow(2).mean());\n    }\n  }, {\n    key: \"analyze\",\n    value: function analyze(s) {\n      var vout = this.codesToOutputVolts(s);\n      vout.subtract(vout.mean(), false);\n\n      var iin = this.outputVoltsToInputAmps(vout);\n\n      return {\n        vOutMean: vout.mean(),\n        vOutPp: this.peakToPeak(vout),\n        vOutRms: this.rms(vout),\n        iInMean: iin.mean(),\n        iInPp: this.peakToPeak(iin),\n        iInRms: this.rms(iin)\n      };\n    }\n  }, {\n    key: \"microVolt\",\n    value: function microVolt(v) {\n      return (v * 1e6).toFixed(3);\n    }\n  }, {\n    key: \"picoAmp\",\n    value: function picoAmp(i) {\n      return (i * 1e12).toFixed(3);\n    }\n  }, {\n    key: \"finish\",\n    value: function finish() {\n      var led = nj.array(this.ledSamples);\n      var amb = nj.array(this.ambSamples);\n\n      if (!this.checkRange(led)) {\n        this.resultHandler({ error: \"LED signal exceeds TIA operating range\" });\n        this.resultHandler = undefined;\n        return;\n      }\n\n      if (!this.checkRange(amb)) {\n        this.resultHandler({ error: \"Ambient signal exceeds TIA operating range\" });\n        this.resultHandler = undefined;\n        return;\n      }\n\n      var ledResults = this.analyze(led);\n      var ambResults = this.analyze(amb);\n\n      var lmaVout = this.codesToOutputVolts(led.subtract(amb));\n      var lmaIin = this.outputVoltsToInputAmps(lmaVout);\n\n      var desc = {\n        \"led-amb_vout_mean\": this.microVolt(lmaVout.mean()),\n        \"led-amb_iin_mean\": this.picoAmp(lmaIin.mean()),\n        \"led_vout_pp\": this.microVolt(ledResults.vOutPp),\n        \"led_vout_rms\": this.microVolt(ledResults.vOutRms),\n        \"led_iin_pp\": this.picoAmp(ledResults.iInPp),\n        \"led_iin_rms\": this.picoAmp(ledResults.iInRms),\n        \"amb_vout_pp\": this.microVolt(ambResults.vOutPp),\n        \"amb_vout_rms\": this.microVolt(ambResults.vOutRms),\n        \"amb_iin_pp\": this.picoAmp(ambResults.iInPp),\n        \"amb_iin_rms\": this.picoAmp(ambResults.iInRms)\n      };\n\n      this.resultHandler({ led: ledResults, amb: ambResults, desc: desc });\n      this.resultHandler = undefined;\n    }\n  }]);\n\n  return PPGAnalyze;\n}();\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar _mc$ui$colors = mc.ui.colors,\n    BLUE = _mc$ui$colors.BLUE,\n    GRAY = _mc$ui$colors.GRAY,\n    GREEN = _mc$ui$colors.GREEN,\n    HOT_BLUE = _mc$ui$colors.HOT_BLUE,\n    HOT_PINK = _mc$ui$colors.HOT_PINK,\n    NAVY = _mc$ui$colors.NAVY,\n    ORANGE = _mc$ui$colors.ORANGE,\n    PINK = _mc$ui$colors.PINK,\n    PURPLE = _mc$ui$colors.PURPLE,\n    RED = _mc$ui$colors.RED,\n    TEAL = _mc$ui$colors.TEAL,\n    TURQUOISE = _mc$ui$colors.TURQUOISE;\nvar _BiostampSensor = BiostampSensor,\n    AD5940Mode = _BiostampSensor.AD5940Mode,\n    AFE4900Color = _BiostampSensor.AFE4900Color,\n    AFE4900Photodiode = _BiostampSensor.AFE4900Photodiode,\n    AFE4900ECGGain = _BiostampSensor.AFE4900ECGGain,\n    AFE4900Mode = _BiostampSensor.AFE4900Mode,\n    EnvironmentMode = _BiostampSensor.EnvironmentMode,\n    MotionMode = _BiostampSensor.MotionMode,\n    MotionRotationType = _BiostampSensor.MotionRotationType;\n\nvar SensorConfig = exports.SensorConfig = function () {\n  function SensorConfig() {\n    _classCallCheck(this, SensorConfig);\n\n    this.recordingEnabled = false;\n\n    this.features = [{\n      id: \"motion\",\n      name: \"Motion\",\n      opts: [{\n        key: \"mode\",\n        values: [MotionMode.ACCEL, MotionMode.ACCEL_GYRO, MotionMode.COMPASS, MotionMode.ROTATION],\n        tx: function tx(n) {\n          return [\"Accel\", \"Accel + Gyro\", \"Compass\", \"Rotation\"][n - 1];\n        }\n      }, {\n        key: \"samplingPeriodUs\",\n        values: [100000, 50000, 32000, 25000, 16000, 12500, 8000, 6250],\n        tx: function tx(n) {\n          return 1000000 / n + \"Hz\";\n        }\n      }, {\n        key: \"accelGRange\",\n        values: [2, 4, 8, 16],\n        tx: function tx(n) {\n          return \"+/-\" + n + \"G\";\n        },\n        use: function use(value) {\n          return value.mode === MotionMode.ACCEL || value.mode === MotionMode.ACCEL_GYRO;\n        }\n      }, {\n        key: \"gyroDpsRange\",\n        values: [250, 500, 1000, 2000],\n        tx: function tx(n) {\n          return \"+/-\" + n + \"Ëš/s\";\n        },\n        use: function use(value) {\n          return value.mode === MotionMode.ACCEL_GYRO;\n        }\n      }, {\n        key: \"rotationType\",\n        values: [MotionRotationType.ROT_ACCEL_GYRO, MotionRotationType.ROT_ACCEL_GYRO_MAG, MotionRotationType.ROT_ACCEL_MAG],\n        tx: function tx(n) {\n          return [\"Accel/Gyro\", \"Accel/Mag\", \"Accel/Gyro/Mag\"][n - 1];\n        },\n        use: function use(value) {\n          return value.mode === MotionMode.ROTATION;\n        }\n      }],\n      value: {\n        mode: BiostampSensor.MotionMode.ACCEL_GYRO,\n        rotationType: BiostampSensor.MotionRotationType.ROT_ACCEL_GYRO,\n        samplingPeriodUs: 8000,\n        accelGRange: 16,\n        gyroDpsRange: 500\n      },\n      engaged: true,\n      signals: function signals(value) {\n        switch (value.mode) {\n          case MotionMode.ACCEL:\n            return [[{ label: \"Accel X\", color: RED }, { label: \"Accel Y\", color: BLUE }, { label: \"Accel Z\", color: GREEN }]];\n          case MotionMode.ACCEL_GYRO:\n            return [[{ label: \"Accel X\", color: RED }, { label: \"Accel Y\", color: BLUE }, { label: \"Accel Z\", color: GREEN }], [{ label: \"Gyro X\", color: RED }, { label: \"Gyro Y\", color: BLUE }, { label: \"Gyro Z\", color: GREEN }]];\n          case MotionMode.COMPASS:\n            return [[{ label: \"X\", color: RED }, { label: \"Y\", color: BLUE }, { label: \"Z\", color: GREEN }]];\n          case MotionMode.ROTATION:\n            return [[{ label: \"W\", color: TURQUOISE }, { label: \"X\", color: RED }, { label: \"Y\", color: BLUE }, { label: \"Z\", color: GREEN }]];\n        }\n      },\n      parse: function parse(value, idx) {\n        return function (packet) {\n          if (value.mode === MotionMode.ACCEL_GYRO) {\n            return idx === 0 ? packet.slice(0, 3) : packet.slice(3);\n          }\n\n          return packet;\n        };\n      }\n    }, {\n      id: \"afe4900\",\n      name: \"AFE\",\n      opts: [{\n        key: \"mode\",\n        values: [AFE4900Mode.ECG, AFE4900Mode.PPG, AFE4900Mode.PTT],\n        tx: function tx(n) {\n          return [\"ECG\", \"PPG\", \"PTT\"][n - 1];\n        }\n      }, {\n        key: \"ecgGain\",\n        values: [AFE4900ECGGain.GAIN_2, AFE4900ECGGain.GAIN_3, AFE4900ECGGain.GAIN_4, AFE4900ECGGain.GAIN_5, AFE4900ECGGain.GAIN_6, AFE4900ECGGain.GAIN_9, AFE4900ECGGain.GAIN_12],\n        tx: function tx(n) {\n          return \"Gain \" + [2, 3, 4, 5, 6, 9, 12][n - 1];\n        },\n        use: function use(value) {\n          return value.mode !== AFE4900Mode.PPG;\n        }\n      }, {\n        key: \"color\",\n        values: [AFE4900Color.GREEN, AFE4900Color.RED, AFE4900Color.INFRARED],\n        tx: function tx(n) {\n          return [\"Green\", \"Red\", \"Infrared\"][n - 1];\n        },\n        use: function use(value) {\n          return value.mode !== AFE4900Mode.ECG;\n        }\n      }, {\n        key: \"photodiode\",\n        values: [AFE4900Photodiode.PD1, AFE4900Photodiode.PD2],\n        tx: function tx(n) {\n          return [\"PD1\", \"PD2\"][n - 1];\n        },\n        use: function use(value) {\n          return value.mode !== AFE4900Mode.ECG;\n        }\n      }],\n      value: {\n        mode: AFE4900Mode.ECG,\n        ecgGain: AFE4900ECGGain.GAIN_2,\n        color: AFE4900Color.RED,\n        photodiode: AFE4900Photodiode.PD1\n      },\n      engaged: false,\n      signals: function signals(value) {\n        switch (value.mode) {\n          case AFE4900Mode.ECG:\n            return [[{ label: \"Millivolts\", color: ORANGE }]];\n          case AFE4900Mode.PPG:\n            return [[{ label: \"Ambient\", color: GRAY }, { label: \"LED\", color: BLUE }], [{ label: \"Ambient\", color: GRAY }, { label: \"LED\", color: BLUE }, { label: \"LED-Ambient\", color: PINK }]];\n          case AFE4900Mode.PTT:\n            return [[{ label: \"Millivolts\", color: ORANGE }], [{ label: \"PPG\", color: PURPLE }]];\n        }\n      },\n      parse: function parse(value, idx) {\n        switch (value.mode) {\n          case AFE4900Mode.ECG:\n          case AFE4900Mode.PTT:\n            return function (packet) {\n              return packet.length ? packet[idx] : packet;\n            };\n          case AFE4900Mode.PPG:\n            return function (packet) {\n              return packet;\n            };\n        }\n      }\n    }, {\n      id: \"environment\",\n      name: \"Environment\",\n      opts: [{\n        key: \"samplingPeriodUs\",\n        values: [1000000, 500000, 200000, 100000],\n        tx: function tx(n) {\n          return 1000000 / n + \"/s\";\n        }\n      }],\n      value: {\n        mode: EnvironmentMode.ALL,\n        samplingPeriodUs: 200000\n      },\n      engaged: false,\n      signals: function signals(value) {\n        return [[{ label: \"Pascals\", color: TURQUOISE }], [{ label: \"Degrees (C)\", color: HOT_BLUE }]];\n      },\n      parse: function parse(value, idx) {\n        return function (packet) {\n          switch (idx) {\n            case 0:\n              return packet.pascals;\n            case 1:\n              return packet.temperatureC;\n          }\n        };\n      }\n    }, {\n      id: \"ad5940\",\n      name: \"Bioimpedance\",\n      opts: [],\n      value: {\n        mode: AD5940Mode.EDA\n      },\n      engaged: false,\n      signals: function signals(value) {\n        return [[{ label: \"Ohms\", color: HOT_PINK }], [{ label: \"Radians\", color: PINK }]];\n      },\n      parse: function parse(value, idx) {\n        return function (packet) {\n          return idx === 0 ? packet.zMag || 0 : packet.zPhase || 0;\n        };\n      }\n    }];\n  }\n\n  _createClass(SensorConfig, [{\n    key: \"getFeature\",\n    value: function getFeature(id) {\n      return this.features.find(function (f) {\n        return f.id === id;\n      });\n    }\n  }, {\n    key: \"setRecordingEnabled\",\n    value: function setRecordingEnabled(enabled) {\n      this.recordingEnabled = enabled;\n\n      return this;\n    }\n  }, {\n    key: \"toggleFeature\",\n    value: function toggleFeature(id, engaged) {\n      this.getFeature(id).engaged = engaged;\n\n      return this;\n    }\n  }, {\n    key: \"editFeature\",\n    value: function editFeature(id, key, value) {\n      this.getFeature(id).value[key] = parseInt(value);\n\n      return this;\n    }\n  }, {\n    key: \"isEngaged\",\n    value: function isEngaged(id) {\n      return this.getFeature(id).engaged;\n    }\n  }, {\n    key: \"isRecordingEnabled\",\n    value: function isRecordingEnabled() {\n      return this.recordingEnabled;\n    }\n  }, {\n    key: \"isValid\",\n    value: function isValid() {\n      return this.features.some(function (f) {\n        return f.engaged;\n      });\n    }\n  }, {\n    key: \"encode\",\n    value: function encode() {\n      var recordingEnabled = this.recordingEnabled;\n      var features = this.features.filter(function (f) {\n        return f.engaged;\n      });\n      var encoded = features.map(function (f) {\n        return _defineProperty({}, f.id, f.value);\n      });\n\n      return Object.assign.apply(null, [{ recordingEnabled: recordingEnabled }].concat(encoded));\n    }\n  }, {\n    key: \"restore\",\n    value: function restore(encoded) {\n      var _this = this;\n\n      this.recordingEnabled = encoded.recordingEnabled;\n\n      Object.keys(encoded).forEach(function (key) {\n        var feature = _this.getFeature(key);\n\n        if (feature) {\n          feature.engaged = false;\n\n          if (encoded[key] !== undefined) {\n            feature.engaged = true;\n            feature.value = encoded[key];\n          }\n        }\n      });\n\n      return this;\n    }\n  }]);\n\n  return SensorConfig;\n}();\n\n;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mc$widgets = mc.widgets,\n    Table = _mc$widgets.Table,\n    IconButton = _mc$widgets.IconButton;\n\nvar DatabaseView = exports.DatabaseView = function (_React$Component) {\n  _inherits(DatabaseView, _React$Component);\n\n  function DatabaseView(props) {\n    _classCallCheck(this, DatabaseView);\n\n    var _this = _possibleConstructorReturn(this, (DatabaseView.__proto__ || Object.getPrototypeOf(DatabaseView)).call(this, props));\n\n    _this.state = {\n      recordings: [],\n      sortKey: \"timestampStart\",\n      sortDirection: -1\n    };\n    return _this;\n  }\n\n  _createClass(DatabaseView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadRecordings();\n    }\n  }, {\n    key: \"loadRecordings\",\n    value: function loadRecordings() {\n      var _this2 = this;\n\n      var db = this.props.db;\n\n\n      db.list().then(function (recordings) {\n        _this2.setState({ recordings: recordings });\n      });\n    }\n  }, {\n    key: \"deleteRecording\",\n    value: function deleteRecording(rec) {\n      var _this3 = this;\n\n      var db = this.props.db;\n\n\n      mc.ui.alert(\"Clear this download from the local database?\", {\n        level: \"warn\",\n        mode: \"confirm\",\n        onHide: function onHide(confirmed) {\n          if (confirmed) {\n            db.delete(rec.serial, rec.recordingId).then(function () {\n              _this3.loadRecordings();\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"deleteAllRecordings\",\n    value: function deleteAllRecordings(rec) {\n      var _this4 = this;\n\n      var db = this.props.db;\n\n\n      mc.ui.alert(\"Clear ALL downloads from the local database?\", {\n        level: \"warn\",\n        mode: \"confirm\",\n        onHide: function onHide(confirmed) {\n          if (confirmed) {\n            db.deleteAll().then(function () {\n              _this4.loadRecordings();\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"sortTable\",\n    value: function sortTable(sortKey, sortDirection) {\n      this.setState({ sortKey: sortKey, sortDirection: sortDirection });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _state = this.state,\n          recordings = _state.recordings,\n          sortKey = _state.sortKey,\n          sortDirection = _state.sortDirection;\n\n\n      var cols = [{\n        prop: \"timestampStart\",\n        label: \"Date/Time\",\n        content: function content(rec) {\n          return mc.format.datetime(rec.recInfo.timestampStart * 1000);\n        },\n        sort: true\n      }, {\n        prop: \"recordingId\",\n        label: \"Recording ID\",\n        sort: true\n      }, {\n        prop: \"serial\",\n        label: \"Sensor\",\n        sort: [\"serial\", \"timestampStart\"]\n      }, {\n        prop: \"durationSec\",\n        label: \"Duration\",\n        content: function content(rec) {\n          return mc.format.interval(rec.recInfo.durationSec * 1000);\n        },\n        sort: true\n      }, {\n        prop: \"sizeBytes\",\n        label: \"Bytes\",\n        content: function content(rec) {\n          return mc.format.filesize(rec.recInfo.sizeBytes);\n        },\n        sort: true\n      }, {\n        prop: \"pages\",\n        label: \"Pages Received\",\n        content: function content(rec) {\n          return rec.pagesDownloaded + \" / \" + rec.numPages;\n        }\n      }, {\n        prop: \"clear\",\n        label: \"Clear\",\n        content: function content(rec) {\n          return React.createElement(IconButton, {\n            icon: \"./img/icon.clear.svg\",\n            label: \"Clear\",\n            scale: 0.8,\n            onPress: _this5.deleteRecording.bind(_this5, rec) });\n        }\n      }];\n\n      return React.createElement(\n        \"div\",\n        { className: \"eng-rec-view\" },\n        React.createElement(\n          \"h1\",\n          null,\n          \"DB\"\n        ),\n        React.createElement(Table, {\n          data: recordings,\n          cols: cols,\n          sort: sortKey,\n          direction: sortDirection,\n          align: \"middle\",\n          onSort: this.sortTable.bind(this) }),\n        recordings.length ? React.createElement(\n          \"div\",\n          { style: { textAlign: \"center\", margin: \"2em\" } },\n          React.createElement(\n            \"button\",\n            { className: \"mc-button\", onClick: this.deleteAllRecordings.bind(this) },\n            \"Clear All\"\n          )\n        ) : null\n      );\n    }\n  }]);\n\n  return DatabaseView;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar IconButton = mc.widgets.IconButton;\n\nvar DebugView = exports.DebugView = function (_React$Component) {\n  _inherits(DebugView, _React$Component);\n\n  function DebugView(props) {\n    _classCallCheck(this, DebugView);\n\n    var _this = _possibleConstructorReturn(this, (DebugView.__proto__ || Object.getPrototypeOf(DebugView)).call(this, props));\n\n    _this.state = {\n      faultLogs: [],\n      debugInfo: {},\n      resetReason: \"?\",\n      busy: false\n    };\n    return _this;\n  }\n\n  _createClass(DebugView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var sensor = this.props.sensor;\n\n\n      sensor.getSystemStatus().then(function (status) {\n        sensor.getFaultLogs().then(function (faultLogs) {\n          sensor.getRTOSDebugInfo().then(function (debugInfo) {\n            _this2.setState({\n              faultLogs: faultLogs,\n              debugInfo: debugInfo,\n              resetReason: status.resetReason || \"?\"\n            });\n          });\n        });\n      });\n    }\n  }, {\n    key: \"simulateFault\",\n    value: function simulateFault(type) {\n      var _props = this.props,\n          sensor = _props.sensor,\n          onBusy = _props.onBusy;\n\n\n      this.setState({ busy: true });\n\n      onBusy(true, \"Simulating fault ...\");\n\n      sensor.simulateFault(type);\n    }\n  }, {\n    key: \"copyText\",\n    value: function copyText(txt) {\n      mc.ui.spin(1, \"Copied\");\n\n      navigator.clipboard.writeText(txt).then(function () {\n        mc.ui.spin(0);\n      });\n    }\n  }, {\n    key: \"copyFaults\",\n    value: function copyFaults() {\n      var faultLogs = this.state.faultLogs;\n\n\n      navigator.clipboard.writeText(JSON.stringify(faultLogs, null, 2)).then(function () {\n        mc.ui.alert(\"Copied!\");\n      });\n    }\n  }, {\n    key: \"clearFaults\",\n    value: function clearFaults() {\n      var _this3 = this;\n\n      var _props2 = this.props,\n          sensor = _props2.sensor,\n          onBusy = _props2.onBusy;\n\n\n      this.setState({ busy: true });\n\n      sensor.clearFaultLogs().then(function () {\n        _this3.setState({\n          faultLogs: [],\n          busy: false\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var sensor = this.props.sensor;\n      var _state = this.state,\n          faultLogs = _state.faultLogs,\n          debugInfo = _state.debugInfo,\n          resetReason = _state.resetReason,\n          busy = _state.busy;\n\n\n      var faultTypes = BiostampSensor.SimulateFaultType;\n      var faultTxt = JSON.stringify(faultLogs, null, 2);\n      var debugTxt = JSON.stringify(debugInfo, null, 2);\n\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\n          \"h1\",\n          null,\n          sensor.serial\n        ),\n        React.createElement(\n          \"section\",\n          null,\n          React.createElement(\n            \"h2\",\n            null,\n            \"Reset Reason\"\n          ),\n          React.createElement(\n            \"pre\",\n            null,\n            resetReason\n          )\n        ),\n        React.createElement(\n          \"section\",\n          null,\n          React.createElement(\n            \"h2\",\n            null,\n            \"Fault Logs\"\n          ),\n          React.createElement(\n            \"div\",\n            { className: \"eng-debug-tasks\" },\n            React.createElement(\n              \"button\",\n              { onClick: this.copyText.bind(this, faultTxt), disabled: busy },\n              \"Copy\"\n            ),\n            React.createElement(\n              \"button\",\n              { onClick: this.clearFaults.bind(this), disabled: busy },\n              \"Clear\"\n            )\n          ),\n          React.createElement(\n            \"pre\",\n            null,\n            faultTxt\n          )\n        ),\n        React.createElement(\n          \"section\",\n          null,\n          React.createElement(\n            \"h2\",\n            null,\n            \"RTOS Debug Info\"\n          ),\n          React.createElement(\n            \"div\",\n            { className: \"eng-debug-tasks\" },\n            React.createElement(\n              \"button\",\n              { onClick: this.copyText.bind(this, debugTxt), disabled: busy },\n              \"Copy\"\n            )\n          ),\n          React.createElement(\n            \"pre\",\n            null,\n            debugTxt\n          )\n        ),\n        React.createElement(\n          \"section\",\n          null,\n          React.createElement(\n            \"h2\",\n            null,\n            \"Simulate Fault\"\n          ),\n          React.createElement(\n            \"ul\",\n            null,\n            Object.keys(faultTypes).filter(function (key) {\n              return faultTypes[key] > 0;\n            }).map(function (key) {\n              return React.createElement(\n                \"li\",\n                { key: key },\n                React.createElement(IconButton, {\n                  display: \"text\",\n                  icon: \"./img/icon.bomb.svg\",\n                  scale: 0.9,\n                  label: key,\n                  disabled: busy,\n                  onPress: _this4.simulateFault.bind(_this4, faultTypes[key]) })\n              );\n            })\n          )\n        )\n      );\n    }\n  }]);\n\n  return DebugView;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mc$widgets = mc.widgets,\n    Table = _mc$widgets.Table,\n    IconButton = _mc$widgets.IconButton,\n    Meter = _mc$widgets.Meter;\n\nvar RecordingsView = exports.RecordingsView = function (_React$Component) {\n  _inherits(RecordingsView, _React$Component);\n\n  function RecordingsView(props) {\n    _classCallCheck(this, RecordingsView);\n\n    var _this = _possibleConstructorReturn(this, (RecordingsView.__proto__ || Object.getPrototypeOf(RecordingsView)).call(this, props));\n\n    _this.interval = null;\n\n    _this.state = {\n      recordings: [],\n      progress: {},\n      busy: false\n    };\n    return _this;\n  }\n\n  _createClass(RecordingsView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadRecordings();\n      this.loadProgress();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"loadRecordings\",\n    value: function loadRecordings() {\n      var _this2 = this;\n\n      var _props = this.props,\n          sensor = _props.sensor,\n          onBusy = _props.onBusy;\n\n      var recordings = [];\n\n      var getRec = function getRec(idx) {\n        onBusy(true);\n\n        sensor.getRecordingInfo(idx).then(function (rec) {\n          recordings.push(rec);\n\n          _this2.setState({ recordings: recordings });\n\n          if (rec.inProgress) {\n            _this2.interval = setInterval(_this2.refresh.bind(_this2), 5000);\n          }\n\n          getRec(idx + 1);\n        }).catch(function (err) {\n          console.log(err.message);\n          onBusy(false);\n        });\n      };\n\n      getRec(0);\n    }\n  }, {\n    key: \"loadProgress\",\n    value: function loadProgress() {\n      var _this3 = this;\n\n      var db = this.props.db;\n\n\n      db.list().then(function (recs) {\n        var progress = {};\n\n        recs.forEach(function (rec) {\n          progress[rec.recordingId] = rec.pagesDownloaded / rec.numPages;\n        });\n\n        _this3.setState({ progress: progress });\n      });\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      var _this4 = this;\n\n      var sensor = this.props.sensor;\n      var recordings = this.state.recordings;\n\n\n      var idx = recordings.length - 1;\n\n      sensor.getRecordingInfo(idx).then(function (rec) {\n        recordings[idx] = rec;\n\n        _this4.setState({ recordings: recordings });\n      });\n    }\n  }, {\n    key: \"downloadRecording\",\n    value: function downloadRecording(idx) {\n      var _this5 = this;\n\n      var _props2 = this.props,\n          sensor = _props2.sensor,\n          onBusy = _props2.onBusy,\n          db = _props2.db;\n      var recordings = this.state.recordings;\n\n\n      var recInfo = recordings[idx];\n      var isoDate = new Date(recInfo.timestampStart * 1000).toISOString();\n      var serial = sensor.serial;\n      var recId = recInfo.recordingId;\n\n      onBusy(true, \"Downloading ...\");\n\n      this.setState({ busy: true });\n\n      db.download(sensor, recInfo, function (_ref) {\n        var pctComplete = _ref.pctComplete,\n            estTimeLeft = _ref.estTimeLeft;\n        var progress = _this5.state.progress;\n\n\n        var msg = \"Downloading (\" + mc.format.duration(estTimeLeft * 1000) + \")\";\n\n        onBusy(true, msg);\n\n        progress[recInfo.recordingId] = pctComplete;\n\n        _this5.setState({ progress: progress });\n      }).then(function () {\n        _this5.exportCsv(recInfo);\n      }).catch(function (error) {\n        mc.ui.alert(error.message, { level: \"warn\" });\n      }).finally(function () {\n        onBusy(false);\n\n        _this5.setState({ busy: false });\n      });\n    }\n  }, {\n    key: \"exportCsv\",\n    value: function exportCsv(recInfo) {\n      var _props3 = this.props,\n          sensor = _props3.sensor,\n          db = _props3.db;\n\n\n      var iso = new Date(recInfo.timestampStart * 1000).toISOString();\n\n      var features = [\"motion\", \"afe4900\", \"ad5940\", \"environment\", \"annotation\"];\n\n      mc.ui.spin(1, \"Exporting CSV files ...\");\n\n      return Promise.all(features.filter(function (feature) {\n        return recInfo.sensorConfig[feature] || feature === \"annotation\";\n      }).map(function (feature) {\n        return db.readCsv(sensor.serial, recInfo.recordingId, feature).then(function (txt) {\n          if (txt.length) {\n            BiostampUtils.writeFile(sensor.serial + \"-\" + iso + \"-\" + feature + \".csv\", txt, \"text/csv\");\n          }\n        });\n      })).finally(function () {\n        mc.ui.spin(0);\n      });\n    }\n  }, {\n    key: \"deleteRecording\",\n    value: function deleteRecording(idx) {\n      var _this6 = this;\n\n      var _props4 = this.props,\n          sensor = _props4.sensor,\n          onBusy = _props4.onBusy;\n      var _state = this.state,\n          recordings = _state.recordings,\n          busy = _state.busy;\n\n\n      mc.ui.alert(\"Delete this recording from the sensor?\", {\n        level: \"warn\",\n        mode: \"confirm\",\n        onHide: function onHide(confirmed) {\n          if (confirmed) {\n            _this6.setState({ busy: true });\n\n            onBusy(true, \"Deleting recording ...\");\n\n            sensor.clearOldestRecording().then(function () {\n              recordings.shift();\n\n              _this6.setState({ busy: false });\n\n              onBusy(false);\n            });\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      var _props5 = this.props,\n          sensor = _props5.sensor,\n          disabled = _props5.disabled;\n      var _state2 = this.state,\n          recordings = _state2.recordings,\n          progress = _state2.progress,\n          busy = _state2.busy;\n\n\n      var cols = [{\n        prop: \"timestampStart\",\n        label: \"Date/Time (ID)\",\n        width: \"25%\",\n        content: function content(rec) {\n          return mc.format.datetime(rec.timestampStart * 1000) + \" (\" + rec.recordingId + \")\";\n        }\n      }, {\n        prop: \"durationSec\",\n        label: \"Duration\",\n        width: \"12.5%\",\n        content: function content(rec) {\n          return React.createElement(\n            \"span\",\n            { \"data-rec-in-progress\": rec.inProgress },\n            mc.format.interval(rec.durationSec * 1000) + \" \"\n          );\n        }\n      }, {\n        prop: \"sensorConfig\",\n        label: \"Configuration (Metadata)\",\n        width: \"25%\",\n        content: function content(rec) {\n          return React.createElement(\n            \"pre\",\n            null,\n            JSON.stringify(rec.sensorConfig) + \" (\" + BiostampUtils.decodeText(rec.metadata) + \")\"\n          );\n        }\n      }, {\n        prop: \"numPages\",\n        label: \"Pages\",\n        width: \"10%\",\n        content: function content(rec) {\n          return mc.format.number(rec.numPages);\n        }\n      }, {\n        prop: \"pct\",\n        label: \"% Downloaded\",\n        width: \"15%\",\n        content: function content(rec, i, n) {\n          var percent = progress[rec.recordingId] || 0;\n\n          return React.createElement(Meter, {\n            percent: percent,\n            color: mc.ui.colors.GREEN,\n            width: 90,\n            height: 6,\n            rounded: true,\n            animate: true });\n        }\n      }, {\n        prop: \"pct\",\n        label: \"Download\",\n        width: \"7.5%\",\n        content: function content(rec, i, n) {\n          return React.createElement(IconButton, {\n            icon: \"./img/icon.download.svg\",\n            label: \"Download\",\n            disabled: rec.inProgress || disabled || busy,\n            onPress: _this7.downloadRecording.bind(_this7, i) });\n        }\n      }, {\n        prop: \"del\",\n        label: \"Delete\",\n        width: \"5%\",\n        content: function content(rec, i, n) {\n          return React.createElement(mc.widgets.IconButton, {\n            icon: \"./img/icon.delete.svg\",\n            label: \"Delete\",\n            disabled: rec.inProgress || disabled || busy || i > 0,\n            onPress: _this7.deleteRecording.bind(_this7, i) });\n        }\n      }];\n\n      return React.createElement(\n        \"div\",\n        { className: \"eng-rec-view\" },\n        React.createElement(\n          \"h1\",\n          null,\n          sensor.serial\n        ),\n        React.createElement(Table, { data: recordings, cols: cols })\n      );\n    }\n  }]);\n\n  return RecordingsView;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorView = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SensorConfig = require(\"js/util/SensorConfig\");\n\nvar _RecordingsView = require(\"js/view/RecordingsView\");\n\nvar _DatabaseView = require(\"js/view/DatabaseView\");\n\nvar _DebugView = require(\"js/view/DebugView\");\n\nvar _Stopwatch = require(\"js/widget/Stopwatch\");\n\nvar _SensorStatus = require(\"js/widget/SensorStatus\");\n\nvar _SensorPanel = require(\"js/widget/SensorPanel\");\n\nvar _Projection = require(\"js/widget/Projection\");\n\nvar _AFE4900PPG = require(\"js/widget/AFE4900PPG\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mc$widgets = mc.widgets,\n    Toggle = _mc$widgets.Toggle,\n    IconButton = _mc$widgets.IconButton,\n    Drop = _mc$widgets.Drop;\n\n\nvar config = new _SensorConfig.SensorConfig();\nvar emitter = new mc.Emitter();\nvar db = void 0;\n\nif (!navigator.bluetooth) {\n  mc.ui.blast(\"This application requires the Web Bluetooth API. Try Google Chrome or Microsoft Edge.\", { level: \"warn\" });\n}\n\nif (navigator.bluetooth) {\n  try {\n    db = new BiostampDb();\n  } catch (e) {\n    mc.ui.blast(\"Oh no! This app could not open a local database. Check your browser settings.\", { level: \"warn\" });\n  }\n}\n\nvar SensorView = exports.SensorView = function (_React$Component) {\n  _inherits(SensorView, _React$Component);\n\n  function SensorView(props) {\n    _classCallCheck(this, SensorView);\n\n    var _this = _possibleConstructorReturn(this, (SensorView.__proto__ || Object.getPrototypeOf(SensorView)).call(this, props));\n\n    _this.state = _extends({}, _this.getInitialState(), { config: config });\n\n    _this.catchError = _this.catchError.bind(_this);\n    return _this;\n  }\n\n  _createClass(SensorView, [{\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      return {\n        sensor: null,\n        version: null,\n        freeSpace: null,\n        recCount: null,\n        status: {},\n        busy: false,\n        sensing: false,\n        recStartTs: null,\n        projecting: false,\n        annotation: \"Testing 1-2-3\"\n      };\n    }\n  }, {\n    key: \"invokeScan\",\n    value: function invokeScan() {\n      var _this2 = this;\n\n      var onDisconnect = this.onDisconnect.bind(this);\n\n      BiostampSensor.connect(\"BRC3\", onDisconnect).then(function (sensor) {\n        window.sensor = sensor;\n\n        _this2.setState({ sensor: sensor });\n        _this2.refreshStatus();\n      }).catch(function (error) {\n        console.info(error.message);\n      });\n    }\n  }, {\n    key: \"onDisconnect\",\n    value: function onDisconnect() {\n      delete window.sensor;\n\n      this.setState(this.getInitialState());\n      this.setBusy(false);\n\n      mc.ui.modal(null);\n\n      console.log(\"disconnected!\");\n    }\n  }, {\n    key: \"refreshStatus\",\n    value: function refreshStatus() {\n      var _this3 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.getSystemStatus().then(function (status) {\n        _this3.setState({ status: status });\n\n        return sensor.getRecordingFreeSpace();\n      }).then(function (freeSpace) {\n        _this3.setState({ freeSpace: freeSpace });\n\n        return sensor.getVersion();\n      }).then(function (version) {\n        _this3.setState({ version: version });\n\n        return sensor.countRecordings();\n      }).then(function (recCount) {\n        _this3.setState({ recCount: recCount });\n\n        return sensor.getSensingInfo();\n      }).then(function (sensingInfo) {\n        if (sensingInfo) {\n          _this3.restoreSensing(sensingInfo);\n        }\n\n        _this3.setBusy(false);\n      });\n    }\n  }, {\n    key: \"restoreSensing\",\n    value: function restoreSensing(sensingInfo) {\n      this.setState({\n        config: config.restore(sensingInfo.sensorConfig),\n        sensing: true,\n        recStartTs: sensingInfo.timestampStart * 1000\n      });\n\n      this.startStreaming();\n    }\n  }, {\n    key: \"enableRecording\",\n    value: function enableRecording(enabled) {\n      var config = this.state.config;\n\n\n      this.setState({\n        config: config.setRecordingEnabled(enabled)\n      });\n    }\n  }, {\n    key: \"toggleSensing\",\n    value: function toggleSensing() {\n      var _this4 = this;\n\n      var _state = this.state,\n          sensing = _state.sensing,\n          config = _state.config;\n\n\n      if (sensing) {\n        this.stopSensing();\n      } else {\n        if (config.recordingEnabled) {\n          this.promptForMetadata().then(function (metadata) {\n            _this4.startSensing(BiostampUtils.encodeText(metadata));\n          });\n        } else {\n          this.startSensing();\n        }\n      }\n    }\n  }, {\n    key: \"copyConfig\",\n    value: function copyConfig() {\n      var config = this.state.config;\n\n\n      mc.ui.spin(1, \"Copied\");\n\n      var txt = JSON.stringify(config.encode(), null, 2);\n\n      navigator.clipboard.writeText(txt).then(function () {\n        mc.ui.spin(0);\n      });\n    }\n  }, {\n    key: \"promptForMetadata\",\n    value: function promptForMetadata() {\n      return new Promise(function (resolve, reject) {\n        var count = mc.cache.getItem(\"count_recs\") || 0;\n\n        var opts = {\n          mode: \"confirm\",\n          labels: {\n            confirm: \"Start\",\n            cancel: \"Cancel\"\n          },\n          input: \"Test Recording \" + (count + 1),\n          inputLimit: 128,\n          onHide: function onHide(confirmed, input) {\n            if (confirmed) {\n              resolve(input);\n\n              mc.cache.setItem(\"count_recs\", count + 1);\n            }\n          }\n        };\n\n        mc.ui.alert(\"Recording metadata:\", opts);\n      });\n    }\n  }, {\n    key: \"catchError\",\n    value: function catchError(error) {\n      console.warn(error);\n\n      this.setBusy(false);\n\n      mc.ui.alert(error.message, { level: \"error\" });\n    }\n  }, {\n    key: \"openRecordingsView\",\n    value: function openRecordingsView() {\n      var _state2 = this.state,\n          sensor = _state2.sensor,\n          sensing = _state2.sensing,\n          config = _state2.config;\n\n\n      var disabled = sensing && config.recordingEnabled;\n\n      var onBusy = this.setBusy.bind(this);\n\n      var view = React.createElement(_RecordingsView.RecordingsView, { sensor: sensor, disabled: disabled, onBusy: onBusy, db: db });\n\n      mc.ui.modal(view, { minWidth: \"90%\" });\n    }\n  }, {\n    key: \"openDatabaseView\",\n    value: function openDatabaseView() {\n      var view = React.createElement(_DatabaseView.DatabaseView, { db: db });\n\n      mc.ui.modal(view, { minWidth: \"80%\" });\n    }\n  }, {\n    key: \"openDebugView\",\n    value: function openDebugView() {\n      var sensor = this.state.sensor;\n\n\n      var onBusy = this.setBusy.bind(this);\n\n      var view = React.createElement(_DebugView.DebugView, { sensor: sensor, onBusy: onBusy });\n\n      mc.ui.modal(view, { width: \"450px\" });\n    }\n  }, {\n    key: \"pickFile\",\n    value: function pickFile() {\n      var input = document.querySelector(\"input[type=file]\");\n\n      input.click();\n    }\n  }, {\n    key: \"setFile\",\n    value: function setFile(evt) {\n      var _this5 = this;\n\n      var sensor = this.state.sensor;\n\n      var input = evt.target;\n      var file = input.files[0];\n      var reader = new FileReader();\n\n      if (file) {\n        reader.onloadend = function () {\n          var image = new Uint8Array(reader.result);\n\n          _this5.setBusy(true, \"Uploading firmware ...\");\n\n          sensor.uploadFirmwareImage(Array.from(image)).then(function () {\n            _this5.setBusy(false);\n\n            input.value = null;\n          }).then(function () {\n            console.log(\"Loading firmware ...\");\n\n            return sensor.loadFirmwareImage();\n          }).then(function () {\n            console.log(\"Loaded firmware\");\n          }).catch(_this5.catchError);\n        };\n\n        reader.readAsArrayBuffer(file);\n      }\n    }\n  }, {\n    key: \"setBusy\",\n    value: function setBusy(busy) {\n      var msg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Busy ...\";\n\n      this.setState({ busy: busy });\n\n      mc.ui.spin(busy ? 1 : 0, msg);\n    }\n  }, {\n    key: \"blinkLeds\",\n    value: function blinkLeds() {\n      var _this6 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.blinkLeds().then(function (resp) {\n        _this6.setBusy(false);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"clearAllRecordings\",\n    value: function clearAllRecordings() {\n      var _this7 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.clearAllRecordings().then(function () {\n        _this7.setBusy(false);\n        _this7.refreshStatus();\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"powerOff\",\n    value: function powerOff() {\n      var _this8 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.powerOff().then(function () {\n        _this8.setBusy(false);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"setTime\",\n    value: function setTime() {\n      var _this9 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.setTime(Date.now() / 1000).then(function () {\n        _this9.setBusy(false);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      var _this10 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.reset().then(function () {\n        _this10.setBusy(false);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"startSensing\",\n    value: function startSensing(metadataBytes) {\n      var _this11 = this;\n\n      var _state3 = this.state,\n          sensor = _state3.sensor,\n          config = _state3.config;\n\n\n      this.setBusy(true);\n\n      return sensor.setTime().then(function () {\n        return sensor.startSensing(config.encode(), 0, metadataBytes).then(function () {\n          _this11.setState({\n            sensing: true,\n            recStartTs: Date.now()\n          });\n\n          _this11.setBusy(false);\n          _this11.startStreaming();\n        });\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"startStreaming\",\n    value: function startStreaming() {\n      var _state4 = this.state,\n          sensor = _state4.sensor,\n          config = _state4.config;\n\n\n      var commands = [];\n\n      if (config.isEngaged(\"motion\")) {\n        commands.push(function () {\n          return sensor.startStreaming(BiostampSensor.StreamingType.MOTION, function (packet) {\n            emitter.emit(\"motion\", packet);\n          });\n        });\n      }\n\n      if (config.isEngaged(\"afe4900\")) {\n        commands.push(function () {\n          return sensor.startStreaming(BiostampSensor.StreamingType.AFE4900, function (packet) {\n            emitter.emit(\"afe4900\", packet);\n          });\n        });\n      }\n\n      if (config.isEngaged(\"environment\")) {\n        commands.push(function () {\n          return sensor.startStreaming(BiostampSensor.StreamingType.ENVIRONMENT, function (packet) {\n            emitter.emit(\"environment\", packet);\n          });\n        });\n      }\n\n      if (config.isEngaged(\"ad5940\")) {\n        commands.push(function () {\n          return sensor.startStreaming(BiostampSensor.StreamingType.AD5940, function (packet) {\n            emitter.emit(\"ad5940\", packet);\n          });\n        });\n      }\n\n      return mc.utils.chain(commands);\n    }\n  }, {\n    key: \"stopSensing\",\n    value: function stopSensing() {\n      var _this12 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.stopSensing().then(function () {\n        _this12.setState({\n          sensing: false,\n          recStartTs: null\n        });\n\n        _this12.setBusy(false);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"alertTemp\",\n    value: function alertTemp() {\n      var _this13 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.getTemperature().then(function (temp) {\n        _this13.setBusy(false);\n\n        mc.ui.alert(temp + \" (\" + mc.format.temperature(temp, \"F\") + \")\");\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"alertPressure\",\n    value: function alertPressure() {\n      var _this14 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.getPressure().then(function (pressure) {\n        _this14.setBusy(false);\n\n        mc.ui.alert(pressure);\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"alertTime\",\n    value: function alertTime() {\n      var _this15 = this;\n\n      var sensor = this.state.sensor;\n\n\n      this.setBusy(true);\n\n      return sensor.getTime().then(function (timestamp) {\n        _this15.setBusy(false);\n\n        mc.ui.alert(timestamp + \" (\" + new Date(timestamp * 1000) + \")\");\n      }).catch(this.catchError);\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var sensor = this.state.sensor;\n\n\n      sensor.disconnect();\n\n      this.setState({\n        sensor: null\n      });\n    }\n  }, {\n    key: \"onToggleFeature\",\n    value: function onToggleFeature(featureId, engaged) {\n      var config = this.state.config;\n\n\n      this.setState({\n        config: config.toggleFeature(featureId, engaged)\n      });\n    }\n  }, {\n    key: \"onEditFeature\",\n    value: function onEditFeature(featureId, valueKey, valueActual) {\n      var config = this.state.config;\n\n\n      this.setState({\n        config: config.editFeature(featureId, valueKey, valueActual)\n      });\n    }\n  }, {\n    key: \"setAnnotation\",\n    value: function setAnnotation(evt) {\n      this.setState({\n        annotation: evt.target.value\n      });\n    }\n  }, {\n    key: \"submitAnnotation\",\n    value: function submitAnnotation() {\n      var _this16 = this;\n\n      var _state5 = this.state,\n          sensor = _state5.sensor,\n          annotation = _state5.annotation;\n\n\n      this.setBusy(true);\n\n      sensor.annotate(annotation).then(function (timestamp) {\n        _this16.setBusy(false);\n      });\n    }\n  }, {\n    key: \"project\",\n    value: function project(projecting) {\n      this.setState({ projecting: projecting });\n\n      mc.ui.freeze(projecting);\n    }\n  }, {\n    key: \"isProjectable\",\n    value: function isProjectable(config) {\n      var cfg = config.getFeature(\"motion\");\n\n      return cfg.engaged && cfg.value.mode === BiostampSensor.MotionMode.ROTATION;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this17 = this;\n\n      var _state6 = this.state,\n          sensor = _state6.sensor,\n          busy = _state6.busy,\n          sensing = _state6.sensing,\n          recStartTs = _state6.recStartTs,\n          status = _state6.status,\n          freeSpace = _state6.freeSpace,\n          recCount = _state6.recCount,\n          version = _state6.version,\n          config = _state6.config,\n          projecting = _state6.projecting,\n          annotation = _state6.annotation;\n\n\n      var ops = [{ label: \"Blink LED\", fn: this.blinkLeds }, { label: \"Set time\", fn: this.setTime }, { label: \"Get time\", fn: this.alertTime }, { label: \"Get temperature\", fn: this.alertTemp }, { label: \"Get pressure\", fn: this.alertPressure }, { label: \"List recordings\", fn: this.openRecordingsView }, { label: \"Clear all recordings\", fn: this.clearAllRecordings }, { label: \"Upload firmware\", fn: this.pickFile }, { label: \"Reset\", fn: this.reset }, { label: \"Power off\", fn: this.powerOff }, { label: \"Disconnect\", fn: this.disconnect }];\n\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(_Projection.Projection, { emitter: emitter, projecting: projecting, onClose: this.project.bind(this, false) }),\n        React.createElement(\n          \"div\",\n          { id: \"main\", \"aria-hidden\": projecting },\n          React.createElement(_Stopwatch.Stopwatch, { sensing: sensing, recStartTs: recStartTs }),\n          React.createElement(\n            \"div\",\n            { className: \"eng-header mc-split-layout\" },\n            React.createElement(\n              \"h1\",\n              null,\n              sensor ? sensor.serial : \"[No sensor]\"\n            ),\n            React.createElement(\n              \"div\",\n              null,\n              React.createElement(\n                \"div\",\n                { id: \"annotation\", \"aria-hidden\": !sensing || !config.isRecordingEnabled() },\n                React.createElement(\"input\", {\n                  type: \"text\",\n                  maxLength: 220,\n                  value: annotation,\n                  onChange: this.setAnnotation.bind(this) }),\n                React.createElement(IconButton, {\n                  icon: \"./img/icon.annotate.svg\",\n                  scale: 1.1,\n                  label: \"Annotate\",\n                  disabled: annotation.length === 0,\n                  onPress: this.submitAnnotation.bind(this) })\n              ),\n              React.createElement(Toggle, {\n                id: \"eng-rec-toggle\",\n                pressed: config.isRecordingEnabled(),\n                disabled: sensing,\n                labels: [\"Rec\", \"Rec\"],\n                background: mc.ui.colors.HOT_PINK,\n                onPress: function onPress(pressed) {\n                  return _this17.enableRecording(pressed);\n                } }),\n              React.createElement(IconButton, {\n                icon: sensing ? \"./img/icon.stop.svg\" : \"./img/icon.start.svg\",\n                scale: 1.6,\n                disabled: !sensor || busy || !config.isValid(),\n                onPress: this.toggleSensing.bind(this),\n                label: sensing ? \"Stop Sensing\" : \"Start Sensing\" }),\n              React.createElement(IconButton, {\n                icon: \"refresh\",\n                scale: 1.1,\n                disabled: !sensor || busy,\n                onPress: this.refreshStatus.bind(this),\n                label: \"Refresh\" }),\n              React.createElement(IconButton, {\n                icon: \"./img/icon.debug.svg\",\n                scale: 1.1,\n                disabled: !sensor || busy,\n                onPress: this.openDebugView.bind(this),\n                label: \"Debug\" }),\n              React.createElement(IconButton, {\n                icon: \"./img/icon.3d.svg\",\n                scale: 1.1,\n                disabled: !sensor || !this.isProjectable(config) || !sensing,\n                onPress: this.project.bind(this, true),\n                label: \"3D\" }),\n              React.createElement(IconButton, {\n                icon: \"./img/icon.db.svg\",\n                scale: 1.1,\n                onPress: this.openDatabaseView.bind(this),\n                disabled: !navigator.bluetooth,\n                label: \"DB\" }),\n              React.createElement(IconButton, {\n                icon: \"./img/icon.bluetooth.svg\",\n                scale: 1.1,\n                disabled: !!sensor || !navigator.bluetooth,\n                onPress: this.invokeScan.bind(this),\n                label: \"Scan\" })\n            )\n          ),\n          React.createElement(\n            \"div\",\n            { className: \"mc-sidebar-layout\" },\n            React.createElement(\n              \"div\",\n              null,\n              config.features.map(function (feature) {\n                return React.createElement(\n                  _SensorPanel.SensorPanel,\n                  {\n                    key: feature.id,\n                    emitter: emitter,\n                    feature: feature,\n                    disabled: sensing,\n                    onToggleFeature: _this17.onToggleFeature.bind(_this17),\n                    onEditFeature: _this17.onEditFeature.bind(_this17) },\n                  feature.id === \"afe4900\" && feature.engaged && feature.value.mode !== 1 ? React.createElement(\n                    Drop,\n                    { align: \"right\" },\n                    React.createElement(IconButton, { icon: \"configure\" }),\n                    React.createElement(\n                      \"div\",\n                      { className: \"mc-drop-content\" },\n                      React.createElement(_AFE4900PPG.AFE4900PPG, {\n                        sensor: sensor,\n                        emitter: emitter,\n                        setBusy: _this17.setBusy.bind(_this17),\n                        sensing: sensing,\n                        busy: busy })\n                    )\n                  ) : null\n                );\n              }),\n              React.createElement(\n                \"button\",\n                { onClick: this.copyConfig.bind(this) },\n                React.createElement(\n                  \"small\",\n                  null,\n                  \"Copy config to clipboard\"\n                )\n              )\n            ),\n            React.createElement(\n              \"div\",\n              { className: \"mc-sticky\" },\n              React.createElement(_SensorStatus.SensorStatus, {\n                status: status,\n                freeSpace: freeSpace,\n                recCount: recCount,\n                version: version }),\n              React.createElement(\n                \"ul\",\n                { className: \"eng-sensor-ops\" },\n                ops.map(function (op, i) {\n                  return React.createElement(\n                    \"li\",\n                    { key: i },\n                    React.createElement(\n                      \"button\",\n                      { disabled: !sensor || busy, onClick: op.fn.bind(_this17) },\n                      op.label\n                    )\n                  );\n                })\n              ),\n              React.createElement(\"input\", { type: \"file\", onChange: this.setFile.bind(this) })\n            )\n          )\n        )\n      );\n    }\n  }]);\n\n  return SensorView;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AFE4900PPG = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PPGAnalyze = require(\"js/util/PPGAnalyze\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _mc$widgets = mc.widgets,\n    IconButton = _mc$widgets.IconButton,\n    Slider = _mc$widgets.Slider,\n    Check = _mc$widgets.Check;\nvar _BiostampSensor = BiostampSensor,\n    AFE4900OffdacScale = _BiostampSensor.AFE4900OffdacScale,\n    AFE4900TIAGain = _BiostampSensor.AFE4900TIAGain;\n\nvar AFE4900PPG = exports.AFE4900PPG = function (_React$Component) {\n  _inherits(AFE4900PPG, _React$Component);\n\n  function AFE4900PPG(props) {\n    _classCallCheck(this, AFE4900PPG);\n\n    var _this = _possibleConstructorReturn(this, (AFE4900PPG.__proto__ || Object.getPrototypeOf(AFE4900PPG)).call(this, props));\n\n    _this.analyzer = new _PPGAnalyze.PPGAnalyze();\n\n    _this.readPacket = function (packet) {\n      return _this.analyzer.read(packet);\n    };\n\n    _this.state = {\n      ledCurrent: 12,\n      offdacCurrent: 0,\n      offdacCurrentAmbient: 0,\n      offdacScale: AFE4900OffdacScale.OFFDAC_SCALE_1X,\n      tiaGain: AFE4900TIAGain.TIA_GAIN_50KOHM,\n      photodiodeDisconnect: false\n    };\n    return _this;\n  }\n\n  _createClass(AFE4900PPG, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var emitter = this.props.emitter;\n\n\n      emitter.on(\"afe4900\", this.readPacket, this);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var emitter = this.props.emitter;\n\n\n      emitter.off(\"afe4900\", this.readPacket);\n    }\n  }, {\n    key: \"setLedCurrent\",\n    value: function setLedCurrent(ledCurrent) {\n      this.setState({ ledCurrent: ledCurrent });\n    }\n  }, {\n    key: \"setOffdacCurrent\",\n    value: function setOffdacCurrent(offdacCurrent) {\n      this.setState({ offdacCurrent: offdacCurrent });\n    }\n  }, {\n    key: \"setOffdacCurrentAmbient\",\n    value: function setOffdacCurrentAmbient(offdacCurrentAmbient) {\n      this.setState({ offdacCurrentAmbient: offdacCurrentAmbient });\n    }\n  }, {\n    key: \"setOffdacScale\",\n    value: function setOffdacScale(evt) {\n      var offdacScale = parseInt(evt.target.value);\n\n      this.setState({ offdacScale: offdacScale });\n    }\n  }, {\n    key: \"setTiaGain\",\n    value: function setTiaGain(evt) {\n      var tiaGain = parseInt(evt.target.value);\n\n      this.setState({ tiaGain: tiaGain });\n    }\n  }, {\n    key: \"setPhotodiodeDisconnect\",\n    value: function setPhotodiodeDisconnect(checked) {\n      var photodiodeDisconnect = checked;\n\n      this.setState({ photodiodeDisconnect: photodiodeDisconnect });\n    }\n  }, {\n    key: \"offdacScaleFactor\",\n    value: function offdacScaleFactor() {\n      var offdacScale = this.state.offdacScale;\n\n      var s = void 0;\n\n      if (offdacScale === AFE4900OffdacScale.OFFDAC_SCALE_8X) {\n        s = 8;\n      } else if (offdacScale === AFE4900OffdacScale.OFFDAC_SCALE_4X) {\n        s = 4;\n      } else if (offdacScale === AFE4900OffdacScale.OFFDAC_SCALE_2X) {\n        s = 2;\n      } else {\n        s = 1;\n      }\n\n      return s * 15.75;\n    }\n  }, {\n    key: \"applyConfig\",\n    value: function applyConfig(evt) {\n      var _this2 = this;\n\n      var _props = this.props,\n          sensor = _props.sensor,\n          setBusy = _props.setBusy;\n\n\n      var config = this.state;\n\n      setBusy(true);\n\n      return sensor.afe4900DynamicConfig(config).then(function () {\n        setBusy(false);\n\n        _this2.analyzer.setDynamicConfig(config);\n      });\n    }\n  }, {\n    key: \"requestPpgAnalyze\",\n    value: function requestPpgAnalyze(evt) {\n      var setBusy = this.props.setBusy;\n\n\n      setBusy(true);\n\n      this.analyzer.request(function (results) {\n        setBusy(false);\n\n        console.info(results);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          busy = _props2.busy,\n          sensing = _props2.sensing;\n      var _state = this.state,\n          ledCurrent = _state.ledCurrent,\n          offdacCurrent = _state.offdacCurrent,\n          offdacCurrentAmbient = _state.offdacCurrentAmbient,\n          offdacScale = _state.offdacScale,\n          tiaGain = _state.tiaGain,\n          photodiodeDisconnect = _state.photodiodeDisconnect;\n\n\n      return React.createElement(\n        \"div\",\n        { className: \"eng-afe4900-ppg\" },\n        React.createElement(\n          \"ul\",\n          null,\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(\n              \"label\",\n              null,\n              \"TIA Gain R (F)\"\n            ),\n            React.createElement(\n              \"select\",\n              { value: tiaGain, onChange: this.setTiaGain.bind(this) },\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_10KOHM },\n                \"10kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_25KOHM },\n                \"25kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_50KOHM },\n                \"50kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_100KOHM },\n                \"100kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_250KOHM },\n                \"250kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_500KOHM },\n                \"500kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_1000KOHM },\n                \"1000kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_1500KOHM },\n                \"1500kÎ©\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900TIAGain.TIA_GAIN_2000KOHM },\n                \"2000kÎ©\"\n              )\n            )\n          ),\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(\n              \"label\",\n              null,\n              \"Offset DAC scale\"\n            ),\n            React.createElement(\n              \"select\",\n              { value: offdacScale, onChange: this.setOffdacScale.bind(this) },\n              React.createElement(\n                \"option\",\n                { value: AFE4900OffdacScale.OFFDAC_SCALE_1X },\n                \"1x\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900OffdacScale.OFFDAC_SCALE_2X },\n                \"2x\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900OffdacScale.OFFDAC_SCALE_4X },\n                \"4x\"\n              ),\n              React.createElement(\n                \"option\",\n                { value: AFE4900OffdacScale.OFFDAC_SCALE_8X },\n                \"8x\"\n              )\n            )\n          ),\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(\n              \"label\",\n              null,\n              \"LED I (OFFDAC)\"\n            ),\n            React.createElement(Slider, {\n              min: -127,\n              max: 127,\n              value: offdacCurrent,\n              label: (offdacCurrent * this.offdacScaleFactor() / 127).toFixed(2) + \"ÂµA (\" + offdacCurrent + \")\",\n              onChange: this.setOffdacCurrent.bind(this) })\n          ),\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(\n              \"label\",\n              null,\n              \"Ambient I (OFFDAC)\"\n            ),\n            React.createElement(Slider, {\n              min: -127,\n              max: 127,\n              value: offdacCurrentAmbient,\n              label: (offdacCurrentAmbient * this.offdacScaleFactor() / 127).toFixed(2) + \"ÂµA (\" + offdacCurrentAmbient + \")\",\n              onChange: this.setOffdacCurrentAmbient.bind(this) })\n          ),\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(\n              \"label\",\n              null,\n              \"I (LED)\"\n            ),\n            React.createElement(Slider, {\n              min: 0,\n              max: 255,\n              value: ledCurrent,\n              label: (ledCurrent * 100 / 255).toFixed(1) + \"mA (\" + ledCurrent + \")\",\n              onChange: this.setLedCurrent.bind(this) })\n          ),\n          React.createElement(\n            \"li\",\n            null,\n            React.createElement(Check, {\n              label: \"Photodiode Disconnect\",\n              checked: photodiodeDisconnect,\n              size: \"small\",\n              onCheck: this.setPhotodiodeDisconnect.bind(this) })\n          )\n        ),\n        React.createElement(\n          \"button\",\n          { disabled: busy, onClick: this.applyConfig.bind(this) },\n          \"Set\"\n        ),\n        React.createElement(\n          \"button\",\n          { disabled: !sensing || busy, onClick: this.requestPpgAnalyze.bind(this) },\n          \"Analyze\"\n        )\n      );\n    }\n  }]);\n\n  return AFE4900PPG;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PPGMinusAmbientStream = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PPGStream2 = require(\"js/widget/PPGStream\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PPGMinusAmbientStream = exports.PPGMinusAmbientStream = function (_PPGStream) {\n  _inherits(PPGMinusAmbientStream, _PPGStream);\n\n  function PPGMinusAmbientStream() {\n    _classCallCheck(this, PPGMinusAmbientStream);\n\n    return _possibleConstructorReturn(this, (PPGMinusAmbientStream.__proto__ || Object.getPrototypeOf(PPGMinusAmbientStream)).apply(this, arguments));\n  }\n\n  _createClass(PPGMinusAmbientStream, [{\n    key: \"getPackets\",\n    value: function getPackets() {\n      var packets = this.props.packets;\n\n      var p = nj.array(packets);\n\n      var led = p.slice(null, [1, 2]);\n      var amb = p.slice(null, [0, 1]);\n      var lma = led.subtract(amb);\n\n      led.subtract(led.mean(), false);\n      amb.subtract(amb.mean(), false);\n      lma.subtract(lma.mean(), false);\n\n      return nj.concatenate([amb, led, lma]).tolist();\n    }\n  }, {\n    key: \"getPlotText\",\n    value: function getPlotText(packets) {\n      var s = nj.array(packets);\n      var lmaText = this.ppgDescribe(s.slice(null, [2, 3]), false);\n\n      return \"LED-Ambient \" + lmaText;\n    }\n  }]);\n\n  return PPGMinusAmbientStream;\n}(_PPGStream2.PPGStream);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PPGStream = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SensorStream2 = require(\"js/widget/SensorStream\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar PPGStream = exports.PPGStream = function (_SensorStream) {\n  _inherits(PPGStream, _SensorStream);\n\n  function PPGStream() {\n    _classCallCheck(this, PPGStream);\n\n    return _possibleConstructorReturn(this, (PPGStream.__proto__ || Object.getPrototypeOf(PPGStream)).apply(this, arguments));\n  }\n\n  _createClass(PPGStream, [{\n    key: \"getPackets\",\n    value: function getPackets() {\n      var packets = this.props.packets;\n\n\n      return packets.map(function (p) {\n        return [p[1], p[0]];\n      });\n    }\n  }, {\n    key: \"ppgDescribe\",\n    value: function ppgDescribe(s, includeMean) {\n      var values = [];\n\n      if (includeMean) {\n        values.push([\"Mean\", s.mean()]);\n      }\n\n      values.push([\"P-P\", s.max() - s.min()]);\n      values.push([\"RMS\", Math.sqrt(s.subtract(s.mean()).pow(2).mean())]);\n\n      return values.map(function (v) {\n        return v[0] + \":\" + v[1].toFixed(0).padStart(8, \" \");\n      }).join(\"   \");\n    }\n  }, {\n    key: \"getPlotText\",\n    value: function getPlotText(packets) {\n      if (packets.length < 2) {\n        return \"...\";\n      }\n\n      var s = nj.array(packets);\n      var ppgText = this.ppgDescribe(s.slice(null, [1, 2]), true);\n      var ambText = this.ppgDescribe(s.slice(null, [0, 1]), true);\n\n      return \"LED \" + ppgText + \"       \" + \"Ambient \" + ambText;\n    }\n  }], [{\n    key: \"numPoints\",\n    value: function numPoints() {\n      return 1000;\n    }\n  }]);\n\n  return PPGStream;\n}(_SensorStream2.SensorStream);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Projection = exports.Projection = function (_React$Component) {\n  _inherits(Projection, _React$Component);\n\n  function Projection() {\n    _classCallCheck(this, Projection);\n\n    return _possibleConstructorReturn(this, (Projection.__proto__ || Object.getPrototypeOf(Projection)).apply(this, arguments));\n  }\n\n  _createClass(Projection, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          emitter = _props.emitter,\n          onClose = _props.onClose;\n\n\n      emitter.on(\"motion\", this.setPacket, this);\n\n      document.body.addEventListener(\"keyup\", function (evt) {\n        if (mc.ui.keyboard.isEscape(evt)) {\n          onClose();\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var emitter = this.props.emitter;\n\n\n      emitter.off(\"motion\", this.setPacket);\n    }\n  }, {\n    key: \"setPacket\",\n    value: function setPacket(packet) {\n      var projecting = this.props.projecting;\n\n\n      if (projecting) {\n        var quat = new Quaternion(packet[0]).toMatrix4();\n\n        var img = this.refs.img;\n\n        requestAnimationFrame(function () {\n          img.setAttribute(\"style\", \"transform: matrix3d(\" + quat + \")\");\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          projecting = _props2.projecting,\n          onClose = _props2.onClose;\n\n\n      return React.createElement(\n        \"div\",\n        { id: \"projection\", onClick: onClose, \"aria-hidden\": !projecting },\n        React.createElement(\"img\", { src: \"./img/sensor.svg\", ref: \"img\" })\n      );\n    }\n  }]);\n\n  return Projection;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorPanel = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _SensorStream = require(\"js/widget/SensorStream\");\n\nvar _PPGStream = require(\"js/widget/PPGStream\");\n\nvar _PPGMinusAmbientStream = require(\"js/widget/PPGMinusAmbientStream\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SensorPanel = exports.SensorPanel = function (_React$Component) {\n  _inherits(SensorPanel, _React$Component);\n\n  function SensorPanel(props) {\n    _classCallCheck(this, SensorPanel);\n\n    var _this = _possibleConstructorReturn(this, (SensorPanel.__proto__ || Object.getPrototypeOf(SensorPanel)).call(this, props));\n\n    _this.state = {\n      packets: []\n    };\n    return _this;\n  }\n\n  _createClass(SensorPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _props = this.props,\n          emitter = _props.emitter,\n          feature = _props.feature;\n\n\n      emitter.on(feature.id, this.setPacket, this);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _props2 = this.props,\n          emitter = _props2.emitter,\n          feature = _props2.feature;\n\n\n      emitter.off(feature.id, this.setPacket);\n    }\n  }, {\n    key: \"setPacket\",\n    value: function setPacket(packet) {\n      var packets = this.state.packets;\n\n\n      this.setState({\n        packets: packets.concat(packet).slice(-500)\n      });\n    }\n  }, {\n    key: \"getChartComponent\",\n    value: function getChartComponent(feature, idx) {\n      var id = feature.id,\n          value = feature.value;\n\n\n      if (id === \"afe4900\" && value.mode === \"PPG\") {\n        return idx === 0 ? _PPGStream.PPGStream : _PPGMinusAmbientStream.PPGMinusAmbientStream;\n      }\n\n      return _SensorStream.SensorStream;\n    }\n  }, {\n    key: \"editFeature\",\n    value: function editFeature(id, key, evt) {\n      var onEditFeature = this.props.onEditFeature;\n\n\n      this.setState({ packets: [] });\n\n      onEditFeature(id, key, evt.target.value);\n    }\n  }, {\n    key: \"toggleFeature\",\n    value: function toggleFeature(id, pressed) {\n      var onToggleFeature = this.props.onToggleFeature;\n\n\n      this.setState({ packets: [] });\n\n      onToggleFeature(id, pressed);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props3 = this.props,\n          feature = _props3.feature,\n          disabled = _props3.disabled,\n          children = _props3.children;\n      var packets = this.state.packets;\n\n\n      var bullet = mc.charts.Legend.DOT;\n      var value = feature.value;\n\n      return React.createElement(\n        \"div\",\n        { className: \"eng-sensor-panel\" },\n        React.createElement(\n          \"div\",\n          { className: \"mc-split-layout\" },\n          React.createElement(\n            \"h2\",\n            null,\n            feature.name\n          ),\n          React.createElement(\n            \"div\",\n            null,\n            feature.opts.map(function (opt) {\n              var applies = !opt.use || opt.use(value);\n\n              return React.createElement(\n                \"select\",\n                {\n                  key: opt.key,\n                  value: value[opt.key],\n                  \"data-applies\": applies,\n                  disabled: disabled || !feature.engaged || !applies,\n                  onChange: _this2.editFeature.bind(_this2, feature.id, opt.key) },\n                opt.values.map(function (val) {\n                  return React.createElement(\n                    \"option\",\n                    { key: val, value: val },\n                    opt.tx ? opt.tx(val) : val\n                  );\n                })\n              );\n            }),\n            children,\n            React.createElement(mc.widgets.Toggle, {\n              pressed: feature.engaged,\n              disabled: disabled,\n              onPress: this.toggleFeature.bind(this, feature.id) })\n          )\n        ),\n        feature.engaged ? feature.signals(value).map(function (group, i) {\n          var data = feature.parse ? packets.map(feature.parse(value, i)) : packets;\n          var colors = group.map(function (g) {\n            return g.color;\n          });\n          var items = group.map(function (g) {\n            return _extends({}, g, { bullet: bullet });\n          });\n\n          var chart = _this2.getChartComponent(feature, i);\n\n          return React.createElement(\n            \"div\",\n            { key: i },\n            React.createElement(chart, { packets: data, colors: colors }),\n            React.createElement(mc.charts.Legend, { items: items })\n          );\n        }) : null\n      );\n    }\n  }]);\n\n  return SensorPanel;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SensorStatus = SensorStatus;\nvar Meter = mc.widgets.Meter;\n\nfunction SensorStatus(props) {\n  var status = props.status,\n      freeSpace = props.freeSpace,\n      recCount = props.recCount,\n      version = props.version;\n  var batteryPercent = status.batteryPercent,\n      chargePower = status.chargePower,\n      uptimeSec = status.uptimeSec;\n\n\n  var percentFull = NaN;\n\n  if (freeSpace) {\n    percentFull = 1 - freeSpace.freeBlocks / freeSpace.totalBlocks;\n  }\n\n  return React.createElement(\n    \"dl\",\n    { className: \"eng-sensor-status\" },\n    React.createElement(\n      \"dt\",\n      null,\n      \"Battery\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      React.createElement(Meter, { percent: batteryPercent / 100, width: \"85\", height: \"6\", animate: true }),\n      batteryPercent ? mc.format.percent(batteryPercent / 100) + \" (\" + batteryPercent * 42 + \"mV) \" : \"?\",\n      chargePower ? React.createElement(\"img\", {\n        src: \"./img/icon.charging.svg\",\n        width: \"10\",\n        height: \"16\",\n        \"data-tooltip\": \"Charging\" }) : null\n    ),\n    React.createElement(\n      \"dt\",\n      null,\n      \"Memory Used\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      React.createElement(Meter, { percent: percentFull, width: \"85\", height: \"6\", animate: true }),\n      !isNaN(percentFull) ? mc.format.percent(percentFull) : \"?\"\n    ),\n    React.createElement(\n      \"dt\",\n      null,\n      \"Saved Recordings\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      recCount === null ? \"?\" : recCount\n    ),\n    React.createElement(\n      \"dt\",\n      null,\n      \"Uptime\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      uptimeSec ? mc.format.duration(uptimeSec * 1000) : \"?\"\n    ),\n    React.createElement(\n      \"dt\",\n      null,\n      \"Firmware Version\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      version ? version.firmwareVersion : \"?\"\n    ),\n    React.createElement(\n      \"dt\",\n      null,\n      \"Bootloader Version\"\n    ),\n    React.createElement(\n      \"dd\",\n      null,\n      version ? version.bootloaderVersion : \"?\"\n    )\n  );\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar SensorStream = exports.SensorStream = function (_React$Component) {\n  _inherits(SensorStream, _React$Component);\n\n  function SensorStream() {\n    _classCallCheck(this, SensorStream);\n\n    return _possibleConstructorReturn(this, (SensorStream.__proto__ || Object.getPrototypeOf(SensorStream)).apply(this, arguments));\n  }\n\n  _createClass(SensorStream, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.plot = this.plot.bind(this);\n      this.plot();\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (nextProps.packets && !document.hidden) {\n        requestAnimationFrame(this.plot);\n      }\n\n      return false;\n    }\n  }, {\n    key: \"plot\",\n    value: function plot() {\n      var colors = this.props.colors;\n\n      var packets = this.getPackets();\n\n      var canvas = this.refs.canvas;\n\n      if (!canvas) {\n        return;\n      }\n\n      var ctx = canvas.getContext(\"2d\");\n      var width = canvas.getBoundingClientRect().width * 2;\n      var height = 120 * 2;\n\n      var _SensorStream$extent = SensorStream.extent(packets.flat()),\n          _SensorStream$extent2 = _slicedToArray(_SensorStream$extent, 2),\n          min = _SensorStream$extent2[0],\n          max = _SensorStream$extent2[1];\n\n      canvas.width = width;\n      canvas.height = height;\n\n      colors.forEach(function (color, i) {\n        var values = packets.map(function (s) {\n          return s.length ? s[i] : s;\n        });\n\n        var points = SensorStream.points(values, min, max, width, height);\n\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n\n        points.forEach(function (point) {\n          ctx.lineTo(point[0], point[1]);\n        });\n\n        ctx.stroke();\n      });\n\n      if (packets.length) {\n        ctx.font = \"24px sans-serif\";\n        ctx.fillStyle = \"#666\";\n        ctx.fillText(this.getPlotText(packets), 15, 30);\n      }\n    }\n  }, {\n    key: \"getPackets\",\n    value: function getPackets() {\n      var packets = this.props.packets;\n\n\n      return packets;\n    }\n  }, {\n    key: \"getPlotText\",\n    value: function getPlotText(packets) {\n      var sample = packets[packets.length - 1];\n\n      return [].concat(sample).join(\", \");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\n        \"div\",\n        { className: \"eng-sensor-stream\" },\n        React.createElement(\"canvas\", { ref: \"canvas\", width: \"100%\", height: \"120\" })\n      );\n    }\n  }], [{\n    key: \"extent\",\n    value: function extent(values) {\n      var min = Math.min.apply(null, values);\n      var max = Math.max.apply(null, values);\n\n      if (min === max) {\n        max *= 2;\n        min = 0;\n      }\n\n      return [min, max];\n    }\n  }, {\n    key: \"numPoints\",\n    value: function numPoints() {\n      return 500;\n    }\n  }, {\n    key: \"points\",\n    value: function points(values, min, max, width, height) {\n      var n = this.numPoints();\n\n      var p = 10;\n      var h = height - 40;\n      var x = function x(d, i) {\n        return width * (i / n);\n      };\n      var y = function y(d, i) {\n        return 40 + (h - p - (h - p * 2) * ((d - min) / (max - min)));\n      };\n\n      return values.map(function (d, i) {\n        return [x(d, i), y(d, i)];\n      });\n    }\n  }]);\n\n  return SensorStream;\n}(React.Component);\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Stopwatch = exports.Stopwatch = function (_React$Component) {\n  _inherits(Stopwatch, _React$Component);\n\n  function Stopwatch(props) {\n    _classCallCheck(this, Stopwatch);\n\n    var _this = _possibleConstructorReturn(this, (Stopwatch.__proto__ || Object.getPrototypeOf(Stopwatch)).call(this, props));\n\n    _this.interval = setInterval(_this.forceUpdate.bind(_this), 1000);\n\n    _this.state = {\n      recStartTs: null\n    };\n    return _this;\n  }\n\n  _createClass(Stopwatch, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interval);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var sensing = this.props.sensing;\n      var recStartTs = this.state.recStartTs;\n\n\n      var millis = recStartTs ? Date.now() - recStartTs : 0;\n\n      return React.createElement(\n        \"div\",\n        { className: \"eng-stopwatch\", \"aria-hidden\": !sensing },\n        mc.format.interval(millis)\n      );\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.sensing && state.recStartTs === null) {\n        return {\n          recStartTs: props.recStartTs || Date.now()\n        };\n      } else if (!props.sensing) {\n        return {\n          recStartTs: null\n        };\n      }\n\n      return null;\n    }\n  }]);\n\n  return Stopwatch;\n}(React.Component);\n"]}